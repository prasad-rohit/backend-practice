<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tail -f implementation</title>
</head>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js" integrity="sha384-mZLF4UVrpi/QTWPA7BjNPEnkIfRFn4ZEO3Qt/HFklTJBj/gBOV8G3HcKn4NfQblz" crossorigin="anonymous"></script>
<script>
    const socket = io("http://localhost:3000")
    
    socket.on("connect", () => {
        console.log(socket.id)
    })
    
    function printlog(data){
        console.log(data);
        
        const nodes = data.map( line => {
            const p = document.createElement("p")
            p.innerHTML = line;
            return p;
        })
        
        document.getElementById("logs").append(...nodes)
    }
    
    socket.on("boot", ({data}) => printlog(data))
    socket.on("update", ({data}) => printlog(data))
</script>
<body>
    <h3>Logs</h3>
    <div id="logs"></div>
</body>
</html>
